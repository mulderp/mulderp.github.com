
<!doctype html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--> 	
<html lang="en"> 
<!--<![endif]-->
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />	<!-- Force Latest IE rendering engine -->
    <title>Looking at a MarionetteJS application</title>

    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->


    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,600' rel='stylesheet' type='text/css'>
    <link href="http://feeds.feedburner.com/ThinkingOnThinking" rel="alternate" title="mulderp" type="application/atom+xml" /> 
    <link rel="shortcut icon" href="/static/images/favicon.png" />

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="keywords" content="javascript, backbonejs, ruby, chef, rails, erlang">

    <link rel="stylesheet" href="/static/css/style.css">

    <!--[if IE 7]>
      <script src="/static/css/font-awesome-ie7.css"></script>
    <![endif]-->
    <script tyoe="text/javascript" src="/static/js/jquery-1.6.1.min.js"></script>
  </head>
  <body>
    <div class="container">	
      <div id='mobile' class='two columns hidden'>
        <ul>
          <li><span class="gray">Patrick Mulder</span></li>
          <li><a id="mail-to-mobile" href="mailto:mulder.patrick@gmail.com" onClick="">mulder.patrick@gmail.com</a></li>
          <li><a href="http://twitter.com/mulpat" onClick="_gaq.push(['_trackEvent', 'Link', 'Click', 'Mobile', Sidebar Email']);">@mulpat</a></li>
        </ul>
      </div>

      <div class="four columns sidebar">
        <section>
          <a id="" style="font-size: 16px; margin-bottom: 8px; padding-bottom: 8px; font-weight: bold" href="/">thinking_on thinking</a>

          <ul id="social">
            <li>
              <a href="mailto:mulder.patrick@gmail.com?subject=hi" class="icon-envelope-alt" id="mail-to"></a>
            </li>

            <li>
              <a href="http://twitter.com/mulpat" class="icon-twitter" id="twitter" style="font-size: 28px;"></a>
            </li>

            <li>
              <a href="http://github.com/mulderp" class="icon-github" id="github" title="I share and fork code here"></a>
            </li>

            <li>
              <a href="skype:patrickmulder__?add" class="icon-comment" id="skype" title="Feel free to add me on Skype"></a>
            </li>

            <li>
              <a href="http://feeds.feedburner.com/ThinkingOnThinking" class="icon-rss" id="rss" title="RSS"></a>
            </li>
          </ul>

          <ul id="me">
            <li>Patrick Mulder</span></li>
            <li class="gray">I like Ruby. JavaScript. Vim. Chef. The Cloud.</li>
          </ul>
  
  <ul>
          <li>Get notified.</li>
          <li><form style="font-size: 8px;" action="http://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open('http://feedburner.google.com/fb/a/mailverify?uri=ThinkingOnThinking', 'popupwindow', 'scrollbars=yes,width=550,height=520');return true"><p>Enter your email address:</p><p><input type="text" style="width:140px" name="email"/></p><input type="hidden" value="ThinkingOnThinking" name="uri"/><input type="hidden" name="loc" value="en_US"/><input type="submit" value="Subscribe" /><p>Delivered by <a href="http://feedburner.google.com" target="_blank">FeedBurner</a></p></form></li>
</ul>
        </section>
      </div>

      <article class='ten columns offset-by-four' id="article-content">
  <header class="ten columns" id="article-header">
    <h1>Looking at a MarionetteJS application</h1>
    <i class="icon-tags"></i>  <a href="/tags/backbonejs" title="View posts tagged with &quot;backbonejs&quot;"><u>backbonejs</u></a>   
  </header>

  <div class='ten columns gray' id="date-header">
    <p>
      Apr 2013
  
    </p>

  </div>

  <div class="ten columns" id="article-content">
    <p>Looking at code from programmers who are better than you, can help you learn, and improve your programming and design skills. And one of the leading thinkers in the Backbone area is <a href="https://twitter.com/derickbailey">Derick Bailey</a>, who has written extensively about BackboneJS in his <a href="http://lostechies.com/derickbailey">blog</a> and recently in a <a href="https://leanpub.com/building-backbone-plugins">book</a>. Let’s look closer at some of his demo projects to illustrate MarionetteJS principles, <a href="git://github.com/marionettejs/bbclonemail.git">BBclonemail</a>.</p>

<p>The JavaScript structure of the application looks like this:</p>

<pre><code>└── javascripts
    ├── bbclonemail
    │   ├── bbclonemail.js
    │   ├── components
    │   │   ├── appController.js
    │   │   └── appSelector.js
    │   ├── contacts
    │   │   ├── contacts.js
    │   │   ├── contactsapp.js
    │   │   └── router.js
    │   └── mail
    │       ├── categories
    │       │   ├── categories.js
    │       │   └── categoryView.js
    │       ├── mailapp.js
    │       ├── mailbox
    │       │   ├── mail.js
    │       │   ├── mailItemView.js
    │       │   └── mailListView.js
    │       └── router.js
    ├── build
    │   ├── bbclonemail.js
    │   └── bbclonemail.min.js
    └── vendor
</code></pre>

<p>We can make the following observations:</p>

<ul>
  <li>
    <p>First, it is not directly visible that we are dealing with a single MVC application structure. Rather, we see from the namespacing that we get 2 components that can be selected with the appController and appSelector. These components (mail and contacts) are then somewhat looking like 2 MVCs, since we see views and models/collections, and a ‘ComponentController’ on top-level of the component.</p>
  </li>
  <li>
    <p>Looking closer at the ComponentController of the Mail component, we see a list of main actions. The actions are: ‘showInbox’, ‘showMailById’, ‘showMailByCategory’.  There are also helper functions, that look related to event binding, and controlling the rendering flow when events occur. Also, the client-side route is updated depending on which events have occured.</p>
  </li>
  <li>
    <p>Since loading of the application can occur asynchronously, ‘initializers’ make sure, that the component has the right state when it is first loaded. Interestingly, after having setup the component, an ‘app:started’ event is fired, saying that the ‘mail’ component is ready for user interaction.  Similary, a finalizer makes sure that the component properly shuts down when needed.</p>
  </li>
  <li>
    <p>The core entities of the Mailbox component are Email and EmailCollection. The loading process of the emails is again wrapped in some shells (Mailbox Controller), that help fetching and filtering the JSON from server side.</p>
  </li>
  <li>
    <p>Last, there are two views for a Mailbox: The list view takes care to render single emails, and to check whether an element in the list has been selected. Also, a controller helps to transform part of the list view into a single item view, when an Email is selected. In the background a region is injected into the rendering process, leaving out the details of DOM locations from the view. The ItemView has not much responsibility apart from filling in values into a template.</p>
  </li>
</ul>

<h1 id="conclusions">Conclusions</h1>
<p>MarionetteJS comes with very interesting abstractions that can take away a lot of BackboneJS boilerplate code. Still, it takes a while to get used to feel better how components can be designed, and how to deal with different level of application events (local events in the DOM vs. global events that should remove/display components)</p>

  </div>

  <footer class="ten columns">
    <p>
    <a class="btn btn-mini btn-info" href="https://github.com/mulderp/mulderp.github.com/issues/new" title="Leave feedback using GitHub" target="_blank"><i class="icon-comment icon-white"></i> Leave me feedback</a>
    </p>
    <p id='follow'>
      Follow me on Twitter <a href="http://twitter.com/mulpat" onClick="_gaq.push(['_trackEvent', 'Link', 'Click', 'Post Twitter']);">here.</a>
    </p>
    <p>
      <a href="https://twitter.com/share" class="twitter-share-button" data-via="mulpat">Tweet</a>
       
      <!-- Put this just before the closing body tag -->
      <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
    </p>
    <p>
       <!-- Google + -->
       <p><g:plusone size="medium"></g:plusone></p>
        
       <!-- Add this just before the closing body tag of your web page -->	
       <script type="text/javascript">
         (function() {
           var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
           po.src = 'https://apis.google.com/js/plusone.js';
           var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
         })();
       </script>
    </p>
  </footer>

    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'thinkingonthinking'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
 
</article>
<script src="../static/js/disqus.js" type="text/javascript"></script>
<script type="text/javascript">
  var analytics=analytics||[];analytics.load=function(e){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"===document.location.protocol?"https://":"http://")+"d2dq2ahtl5zl1z.cloudfront.net/analytics.js/v1/"+e+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n);var r=function(e){return function(){analytics.push([e].concat(Array.prototype.slice.call(arguments,0)))}},i=["identify","track","trackLink","trackForm","trackClick","trackSubmit","pageview","ab","alias"];for(var s=0;s<i.length;s++)analytics[i[s]]=r(i[s])};
  analytics.load("t2dez1p4gw");
  analytics.track('Post', {
      title: "Looking at a MarionetteJS application"
    });
</script>

    </div>

<script type="text/javascript">
  var analytics=analytics||[];analytics.load=function(e){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"===document.location.protocol?"https://":"http://")+"d2dq2ahtl5zl1z.cloudfront.net/analytics.js/v1/"+e+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n);var r=function(e){return function(){analytics.push([e].concat(Array.prototype.slice.call(arguments,0)))}},i=["identify","track","trackLink","trackForm","trackClick","trackSubmit","pageview","ab","alias"];for(var s=0;s<i.length;s++)analytics[i[s]]=r(i[s])};
  analytics.load("t2dez1p4gw");
  $(document).ready(function() {
    analytics.trackLink( $("#mail-to"), 'mail_event', {source:"main"});
    analytics.trackLink( $("#github"), 'contact-github', {source:"main"});
    analytics.trackLink( $("#skype"), 'contact-skype', {source:"main"});
    analytics.trackLink( $("#rss"), 'contact-rss', {source:"main"});
  });
</script>
  </body>
</html> 
